+ bash run_auto_pt_channellast.sh all float32 56
+ model_all=all
+ '[' all == all ']'
+ model_all=alexnet,densenet121,densenet161,densenet169,efficientnet_b0,efficientnet_b1,efficientnet_b2,efficientnet_b3,fbnetc_100,googlenet,inception_v3,mnasnet0_5,mnasnet1_0,resnet101,resnet152,resnet18,resnet34,resnet50,resnext101_32x8d,resnext50_32x4d,shufflenet_v2_x0_5,shufflenet_v2_x1_0,spnasnet_100,squeezenet1_0,squeezenet1_1,vgg11,vgg11_bn,vgg13,vgg13_bn,vgg16,vgg16_bn,vgg19,vgg19_bn,wide_resnet101_2,wide_resnet50_2
+ precision=float32
+ batch_size=56
+ profile=
+ additional_options=
+ '[' == profile ']'
run_auto_pt_channellast.sh: line 11: [: ==: unary operator expected
+ MODEL_NAME_LIST=($(echo "${model_all}" |sed 's/,/ /g'))
++ echo alexnet,densenet121,densenet161,densenet169,efficientnet_b0,efficientnet_b1,efficientnet_b2,efficientnet_b3,fbnetc_100,googlenet,inception_v3,mnasnet0_5,mnasnet1_0,resnet101,resnet152,resnet18,resnet34,resnet50,resnext101_32x8d,resnext50_32x4d,shufflenet_v2_x0_5,shufflenet_v2_x1_0,spnasnet_100,squeezenet1_0,squeezenet1_1,vgg11,vgg11_bn,vgg13,vgg13_bn,vgg16,vgg16_bn,vgg19,vgg19_bn,wide_resnet101_2,wide_resnet50_2
++ sed 's/,/ /g'
+ export LD_PRELOAD=/root/miniconda3/envs/ipex111/lib/libjemalloc.so
+ LD_PRELOAD=/root/miniconda3/envs/ipex111/lib/libjemalloc.so
+ export LD_PRELOAD=/root/miniconda3/envs/ipex111/lib/libjemalloc.so:/root/miniconda3/envs/ipex111/lib/libiomp5.so
+ LD_PRELOAD=/root/miniconda3/envs/ipex111/lib/libjemalloc.so:/root/miniconda3/envs/ipex111/lib/libiomp5.so
+ export MALLOC_CONF=oversize_threshold:1,background_thread:true,metadata_thp:auto,dirty_decay_ms:9000000000,muzzy_decay_ms:9000000000
+ MALLOC_CONF=oversize_threshold:1,background_thread:true,metadata_thp:auto,dirty_decay_ms:9000000000,muzzy_decay_ms:9000000000
+ export KMP_AFFINITY=granularity=fine,compact,1,0
+ KMP_AFFINITY=granularity=fine,compact,1,0
+ export KMP_BLOCKTIME=1
+ KMP_BLOCKTIME=1
+ export DNNL_PRIMITIVE_CACHE_CAPACITY=1024
+ DNNL_PRIMITIVE_CACHE_CAPACITY=1024
+ export KMP_SETTINGS=1
+ KMP_SETTINGS=1
+ rm -rf logs
+ mkdir logs
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a alexnet -b 56 --precision float32 --channels_last 1
+ tee ./logs/alexnet-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Namespace(data='', arch='alexnet', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'alexnet'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.028 ( 0.028)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.028 ( 0.028)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.028 ( 0.028)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.028 ( 0.028)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.029 ( 0.028)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.027 ( 0.028)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.028 ( 0.028)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.027 ( 0.028)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.027 ( 0.028)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.027 ( 0.028)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 0.496 ms
inference Throughput: 2016.343 fps
++ grep 'inference latency:' ./logs/alexnet-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=0.496
++ grep 'inference Throughput:' ./logs/alexnet-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=2016.343
+ echo alexnet NHWC float32 2016.343
+ tee -a ./logs/summary.log
alexnet NHWC float32 2016.343
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a densenet121 -b 56 --precision float32 --channels_last 1
+ tee ./logs/densenet121-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Downloading: "https://download.pytorch.org/models/densenet121-a639ec97.pth" to /root/.cache/torch/hub/checkpoints/densenet121-a639ec97.pth
  0%|          | 0.00/30.8M [00:00<?, ?B/s]  0%|          | 8.00k/30.8M [00:00<13:17, 40.5kB/s]  0%|          | 40.0k/30.8M [00:00<04:17, 125kB/s]   0%|          | 64.0k/30.8M [00:00<06:16, 85.8kB/s]  0%|          | 80.0k/30.8M [00:00<06:37, 81.2kB/s]  1%|          | 224k/30.8M [00:01<01:36, 332kB/s]    1%|          | 288k/30.8M [00:01<02:54, 184kB/s]  2%|▏         | 552k/30.8M [00:02<01:17, 410kB/s]  2%|▏         | 632k/30.8M [00:02<02:04, 254kB/s]  3%|▎         | 880k/30.8M [00:02<01:14, 423kB/s]  4%|▍         | 1.24M/30.8M [00:03<00:38, 804kB/s]  5%|▍         | 1.41M/30.8M [00:03<00:49, 626kB/s]  5%|▌         | 1.55M/30.8M [00:03<00:46, 656kB/s]  6%|▌         | 1.74M/30.8M [00:03<00:37, 806kB/s]  6%|▌         | 1.91M/30.8M [00:03<00:32, 942kB/s]  7%|▋         | 2.05M/30.8M [00:04<00:42, 713kB/s]  7%|▋         | 2.20M/30.8M [00:04<00:51, 586kB/s]  9%|▊         | 2.65M/30.8M [00:04<00:27, 1.06MB/s] 10%|▉         | 2.96M/30.8M [00:05<00:24, 1.21MB/s] 11%|█         | 3.29M/30.8M [00:05<00:22, 1.28MB/s] 12%|█▏        | 3.63M/30.8M [00:05<00:19, 1.44MB/s] 12%|█▏        | 3.80M/30.8M [00:05<00:25, 1.10MB/s] 14%|█▍        | 4.27M/30.8M [00:06<00:23, 1.21MB/s] 15%|█▌        | 4.73M/30.8M [00:06<00:21, 1.29MB/s] 17%|█▋        | 5.12M/30.8M [00:06<00:20, 1.32MB/s] 18%|█▊        | 5.48M/30.8M [00:07<00:19, 1.36MB/s] 19%|█▉        | 5.82M/30.8M [00:07<00:19, 1.35MB/s] 20%|█▉        | 6.10M/30.8M [00:07<00:18, 1.37MB/s] 20%|██        | 6.29M/30.8M [00:07<00:19, 1.35MB/s] 22%|██▏       | 6.89M/30.8M [00:07<00:13, 1.92MB/s] 23%|██▎       | 7.09M/30.8M [00:07<00:14, 1.69MB/s] 24%|██▎       | 7.30M/30.8M [00:08<00:15, 1.55MB/s] 24%|██▍       | 7.46M/30.8M [00:08<00:16, 1.47MB/s] 25%|██▍       | 7.60M/30.8M [00:08<00:26, 935kB/s]  25%|██▌       | 7.73M/30.8M [00:08<00:24, 991kB/s] 26%|██▌       | 8.04M/30.8M [00:09<00:23, 1.03MB/s] 26%|██▋       | 8.17M/30.8M [00:09<00:22, 1.05MB/s] 28%|██▊       | 8.64M/30.8M [00:09<00:14, 1.64MB/s] 29%|██▊       | 8.83M/30.8M [00:09<00:14, 1.60MB/s] 29%|██▉       | 9.00M/30.8M [00:09<00:23, 988kB/s]  30%|██▉       | 9.13M/30.8M [00:10<00:23, 982kB/s] 31%|███       | 9.53M/30.8M [00:10<00:14, 1.51MB/s] 32%|███▏      | 9.73M/30.8M [00:10<00:13, 1.59MB/s] 32%|███▏      | 9.93M/30.8M [00:10<00:16, 1.33MB/s] 33%|███▎      | 10.1M/30.8M [00:10<00:17, 1.26MB/s] 33%|███▎      | 10.2M/30.8M [00:11<00:24, 886kB/s]  34%|███▍      | 10.5M/30.8M [00:11<00:41, 520kB/s] 37%|███▋      | 11.3M/30.8M [00:12<00:17, 1.20MB/s] 37%|███▋      | 11.5M/30.8M [00:12<00:18, 1.08MB/s] 38%|███▊      | 11.7M/30.8M [00:12<00:21, 917kB/s]  40%|███▉      | 12.2M/30.8M [00:13<00:19, 1.02MB/s] 42%|████▏     | 13.0M/30.8M [00:13<00:17, 1.09MB/s] 44%|████▍     | 13.7M/30.8M [00:14<00:13, 1.33MB/s] 45%|████▌     | 14.0M/30.8M [00:14<00:15, 1.14MB/s] 46%|████▌     | 14.2M/30.8M [00:14<00:15, 1.12MB/s] 48%|████▊     | 14.8M/30.8M [00:15<00:13, 1.25MB/s] 49%|████▉     | 15.2M/30.8M [00:15<00:13, 1.20MB/s] 51%|█████     | 15.7M/30.8M [00:15<00:11, 1.44MB/s] 52%|█████▏    | 15.9M/30.8M [00:16<00:11, 1.37MB/s] 52%|█████▏    | 16.1M/30.8M [00:16<00:20, 745kB/s]  55%|█████▍    | 16.9M/30.8M [00:16<00:10, 1.41MB/s] 56%|█████▌    | 17.2M/30.8M [00:17<00:08, 1.60MB/s] 57%|█████▋    | 17.5M/30.8M [00:17<00:09, 1.45MB/s] 58%|█████▊    | 17.8M/30.8M [00:17<00:13, 1.04MB/s] 59%|█████▊    | 18.1M/30.8M [00:18<00:13, 1.03MB/s] 60%|█████▉    | 18.5M/30.8M [00:18<00:10, 1.22MB/s] 60%|██████    | 18.6M/30.8M [00:18<00:12, 1.04MB/s] 61%|██████    | 18.8M/30.8M [00:18<00:11, 1.08MB/s] 61%|██████▏   | 18.9M/30.8M [00:19<00:12, 1.01MB/s] 62%|██████▏   | 19.0M/30.8M [00:19<00:12, 960kB/s]  62%|██████▏   | 19.2M/30.8M [00:19<00:13, 909kB/s] 63%|██████▎   | 19.4M/30.8M [00:19<00:13, 912kB/s] 63%|██████▎   | 19.5M/30.8M [00:19<00:13, 891kB/s] 63%|██████▎   | 19.6M/30.8M [00:19<00:17, 678kB/s] 64%|██████▍   | 19.8M/30.8M [00:20<00:12, 931kB/s] 65%|██████▍   | 19.9M/30.8M [00:20<00:12, 926kB/s] 65%|██████▍   | 20.0M/30.8M [00:20<00:16, 688kB/s] 65%|██████▌   | 20.1M/30.8M [00:21<00:30, 369kB/s] 67%|██████▋   | 20.5M/30.8M [00:21<00:15, 685kB/s] 67%|██████▋   | 20.8M/30.8M [00:21<00:11, 896kB/s] 68%|██████▊   | 21.0M/30.8M [00:21<00:12, 862kB/s] 68%|██████▊   | 21.1M/30.8M [00:22<00:13, 735kB/s] 70%|██████▉   | 21.5M/30.8M [00:22<00:11, 888kB/s] 71%|███████   | 21.8M/30.8M [00:22<00:08, 1.13MB/s] 71%|███████   | 21.9M/30.8M [00:22<00:08, 1.08MB/s] 72%|███████▏  | 22.1M/30.8M [00:23<00:14, 654kB/s]  72%|███████▏  | 22.2M/30.8M [00:23<00:14, 614kB/s] 73%|███████▎  | 22.5M/30.8M [00:24<00:12, 699kB/s] 74%|███████▍  | 22.8M/30.8M [00:24<00:09, 934kB/s] 74%|███████▍  | 22.9M/30.8M [00:24<00:11, 716kB/s] 76%|███████▌  | 23.4M/30.8M [00:24<00:06, 1.19MB/s] 77%|███████▋  | 23.6M/30.8M [00:25<00:08, 873kB/s]  77%|███████▋  | 23.7M/30.8M [00:25<00:08, 874kB/s] 78%|███████▊  | 24.0M/30.8M [00:25<00:06, 1.09MB/s] 78%|███████▊  | 24.1M/30.8M [00:25<00:06, 1.14MB/s] 79%|███████▊  | 24.3M/30.8M [00:25<00:07, 952kB/s]  79%|███████▉  | 24.4M/30.8M [00:25<00:06, 969kB/s] 79%|███████▉  | 24.5M/30.8M [00:26<00:07, 884kB/s] 80%|███████▉  | 24.6M/30.8M [00:26<00:07, 878kB/s] 80%|████████  | 24.7M/30.8M [00:26<00:07, 850kB/s] 81%|████████  | 24.9M/30.8M [00:26<00:10, 593kB/s] 81%|████████▏ | 25.1M/30.8M [00:26<00:09, 672kB/s] 82%|████████▏ | 25.1M/30.8M [00:27<00:10, 553kB/s] 83%|████████▎ | 25.5M/30.8M [00:27<00:08, 655kB/s] 83%|████████▎ | 25.6M/30.8M [00:27<00:09, 606kB/s] 83%|████████▎ | 25.7M/30.8M [00:28<00:09, 567kB/s] 84%|████████▍ | 25.9M/30.8M [00:28<00:07, 715kB/s] 84%|████████▍ | 26.0M/30.8M [00:28<00:08, 599kB/s] 84%|████████▍ | 26.1M/30.8M [00:28<00:10, 496kB/s] 85%|████████▌ | 26.3M/30.8M [00:29<00:07, 657kB/s] 86%|████████▌ | 26.4M/30.8M [00:29<00:08, 524kB/s] 86%|████████▌ | 26.5M/30.8M [00:29<00:08, 549kB/s] 86%|████████▋ | 26.6M/30.8M [00:29<00:07, 599kB/s] 87%|████████▋ | 26.8M/30.8M [00:29<00:06, 651kB/s] 87%|████████▋ | 27.0M/30.8M [00:30<00:05, 709kB/s] 89%|████████▊ | 27.4M/30.8M [00:30<00:03, 1.06MB/s] 89%|████████▉ | 27.5M/30.8M [00:30<00:03, 1.01MB/s] 89%|████████▉ | 27.6M/30.8M [00:31<00:06, 538kB/s]  90%|█████████ | 27.8M/30.8M [00:31<00:04, 678kB/s] 91%|█████████ | 28.0M/30.8M [00:31<00:03, 915kB/s] 91%|█████████ | 28.1M/30.8M [00:32<00:05, 479kB/s] 93%|█████████▎| 28.6M/30.8M [00:32<00:02, 866kB/s] 93%|█████████▎| 28.7M/30.8M [00:32<00:02, 826kB/s] 94%|█████████▎| 28.9M/30.8M [00:32<00:02, 776kB/s] 94%|█████████▍| 29.0M/30.8M [00:33<00:02, 738kB/s] 94%|█████████▍| 29.1M/30.8M [00:33<00:02, 739kB/s] 95%|█████████▍| 29.2M/30.8M [00:33<00:02, 775kB/s] 95%|█████████▍| 29.3M/30.8M [00:33<00:02, 804kB/s] 95%|█████████▌| 29.4M/30.8M [00:33<00:02, 701kB/s] 96%|█████████▌| 29.6M/30.8M [00:33<00:01, 1.01MB/s] 96%|█████████▋| 29.7M/30.8M [00:33<00:01, 768kB/s]  97%|█████████▋| 29.8M/30.8M [00:34<00:01, 686kB/s] 97%|█████████▋| 29.9M/30.8M [00:34<00:02, 437kB/s] 98%|█████████▊| 30.1M/30.8M [00:34<00:01, 525kB/s] 98%|█████████▊| 30.3M/30.8M [00:35<00:00, 752kB/s] 99%|█████████▉| 30.5M/30.8M [00:35<00:00, 741kB/s] 99%|█████████▉| 30.6M/30.8M [00:35<00:00, 727kB/s]100%|█████████▉| 30.8M/30.8M [00:36<00:00, 462kB/s]100%|██████████| 30.8M/30.8M [00:36<00:00, 889kB/s]
Namespace(data='', arch='densenet121', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'densenet121'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.311 ( 0.311)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.309 ( 0.309)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.308 ( 0.309)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.309 ( 0.309)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.309 ( 0.310)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.313 ( 0.310)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.308 ( 0.310)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.308 ( 0.310)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.309 ( 0.310)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.311 ( 0.310)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 5.528 ms
inference Throughput: 180.892 fps
++ grep 'inference latency:' ./logs/densenet121-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=5.528
++ grep 'inference Throughput:' ./logs/densenet121-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=180.892
+ echo densenet121 NHWC float32 180.892
+ tee -a ./logs/summary.log
densenet121 NHWC float32 180.892
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a densenet161 -b 56 --precision float32 --channels_last 1
+ tee ./logs/densenet161-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Downloading: "https://download.pytorch.org/models/densenet161-8d451a50.pth" to /root/.cache/torch/hub/checkpoints/densenet161-8d451a50.pth
  0%|          | 0.00/110M [00:00<?, ?B/s]  0%|          | 40.0k/110M [00:00<06:11, 311kB/s]  0%|          | 104k/110M [00:00<04:14, 455kB/s]   0%|          | 208k/110M [00:00<02:47, 690kB/s]  0%|          | 376k/110M [00:00<01:48, 1.06MB/s]  1%|          | 656k/110M [00:00<01:08, 1.68MB/s]  1%|          | 1.13M/110M [00:00<00:40, 2.82MB/s]  2%|▏         | 1.98M/110M [00:00<00:24, 4.73MB/s]  3%|▎         | 3.43M/110M [00:00<00:14, 8.00MB/s]  5%|▌         | 5.94M/110M [00:00<00:08, 13.6MB/s]  9%|▉         | 10.1M/110M [00:01<00:04, 22.8MB/s] 15%|█▍        | 16.2M/110M [00:01<00:02, 35.3MB/s] 20%|██        | 22.5M/110M [00:01<00:02, 44.4MB/s] 26%|██▌       | 28.8M/110M [00:01<00:01, 50.9MB/s] 32%|███▏      | 34.8M/110M [00:01<00:01, 53.3MB/s] 37%|███▋      | 40.9M/110M [00:01<00:01, 54.9MB/s] 42%|████▏     | 46.7M/110M [00:01<00:01, 55.9MB/s] 47%|████▋     | 52.3M/110M [00:01<00:01, 56.8MB/s] 53%|█████▎    | 58.3M/110M [00:01<00:00, 57.6MB/s] 58%|█████▊    | 64.1M/110M [00:01<00:00, 56.6MB/s] 63%|██████▎   | 70.0M/110M [00:02<00:00, 57.9MB/s] 69%|██████▉   | 76.0M/110M [00:02<00:00, 57.9MB/s] 74%|███████▍  | 81.5M/110M [00:02<00:00, 56.4MB/s] 80%|███████▉  | 87.9M/110M [00:02<00:00, 58.8MB/s] 85%|████████▌ | 94.1M/110M [00:02<00:00, 60.4MB/s] 91%|█████████ | 100M/110M [00:02<00:00, 60.2MB/s]  96%|█████████▌| 106M/110M [00:02<00:00, 60.7MB/s]100%|██████████| 110M/110M [00:02<00:00, 41.5MB/s]
Namespace(data='', arch='densenet161', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'densenet161'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.668 ( 0.668)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.668 ( 0.667)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.669 ( 0.668)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.669 ( 0.668)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.667 ( 0.668)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.668 ( 0.668)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.671 ( 0.668)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.670 ( 0.668)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.671 ( 0.668)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.670 ( 0.669)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 11.939 ms
inference Throughput: 83.762 fps
++ grep 'inference latency:' ./logs/densenet161-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=11.939
++ grep 'inference Throughput:' ./logs/densenet161-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=83.762
+ echo densenet161 NHWC float32 83.762
+ tee -a ./logs/summary.log
densenet161 NHWC float32 83.762
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a densenet169 -b 56 --precision float32 --channels_last 1
+ tee ./logs/densenet169-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Downloading: "https://download.pytorch.org/models/densenet169-b2777c0a.pth" to /root/.cache/torch/hub/checkpoints/densenet169-b2777c0a.pth
  0%|          | 0.00/54.7M [00:00<?, ?B/s]  0%|          | 32.0k/54.7M [00:00<03:34, 267kB/s]  0%|          | 104k/54.7M [00:00<02:05, 456kB/s]   0%|          | 224k/54.7M [00:00<01:18, 727kB/s]  1%|          | 416k/54.7M [00:00<00:49, 1.15MB/s]  1%|▏         | 752k/54.7M [00:00<00:29, 1.89MB/s]  2%|▏         | 1.30M/54.7M [00:00<00:17, 3.15MB/s]  4%|▍         | 2.30M/54.7M [00:00<00:10, 5.46MB/s]  7%|▋         | 4.00M/54.7M [00:00<00:05, 9.23MB/s] 13%|█▎        | 7.03M/54.7M [00:00<00:03, 16.1MB/s] 19%|█▉        | 10.3M/54.7M [00:01<00:03, 14.0MB/s] 21%|██▏       | 11.7M/54.7M [00:01<00:04, 10.5MB/s] 36%|███▋      | 19.9M/54.7M [00:01<00:01, 24.7MB/s] 45%|████▍     | 24.6M/54.7M [00:01<00:01, 23.9MB/s] 56%|█████▌    | 30.5M/54.7M [00:01<00:00, 31.2MB/s] 68%|██████▊   | 37.1M/54.7M [00:02<00:00, 39.4MB/s] 77%|███████▋  | 42.2M/54.7M [00:02<00:00, 35.0MB/s] 88%|████████▊ | 48.2M/54.7M [00:02<00:00, 40.0MB/s]100%|██████████| 54.7M/54.7M [00:02<00:00, 23.7MB/s]
Namespace(data='', arch='densenet169', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'densenet169'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.376 ( 0.376)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.375 ( 0.376)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.378 ( 0.376)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.375 ( 0.376)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.375 ( 0.376)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.376 ( 0.376)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.376 ( 0.376)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.377 ( 0.376)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.378 ( 0.376)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.375 ( 0.376)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 6.717 ms
inference Throughput: 148.873 fps
++ grep 'inference latency:' ./logs/densenet169-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=6.717
++ grep 'inference Throughput:' ./logs/densenet169-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=148.873
+ echo densenet169 NHWC float32 148.873
+ tee -a ./logs/summary.log
densenet169 NHWC float32 148.873
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a efficientnet_b0 -b 56 --precision float32 --channels_last 1
+ tee ./logs/efficientnet_b0-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/transforms/transforms.py:332: UserWarning: Argument interpolation should be of type InterpolationMode instead of int. Please, use InterpolationMode enum.
  warnings.warn(
Namespace(data='', arch='efficientnet_b0', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'efficientnet_b0'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.109 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.109 ( 0.110)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.110 ( 0.110)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.109 ( 0.110)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.110 ( 0.110)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.109 ( 0.110)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.110 ( 0.110)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.110 ( 0.110)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.110 ( 0.110)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.110 ( 0.110)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 1.957 ms
inference Throughput: 510.883 fps
++ grep 'inference latency:' ./logs/efficientnet_b0-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=1.957
++ grep 'inference Throughput:' ./logs/efficientnet_b0-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=510.883
+ echo efficientnet_b0 NHWC float32 510.883
+ tee -a ./logs/summary.log
efficientnet_b0 NHWC float32 510.883
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a efficientnet_b1 -b 56 --precision float32 --channels_last 1
+ tee ./logs/efficientnet_b1-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/transforms/transforms.py:332: UserWarning: Argument interpolation should be of type InterpolationMode instead of int. Please, use InterpolationMode enum.
  warnings.warn(
Namespace(data='', arch='efficientnet_b1', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'efficientnet_b1'
Using image size 240
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.181 ( 0.181)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.181 ( 0.181)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.182 ( 0.181)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.182 ( 0.181)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.181 ( 0.181)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.182 ( 0.181)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.181 ( 0.181)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.180 ( 0.181)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.181 ( 0.181)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.181 ( 0.181)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 3.232 ms
inference Throughput: 309.441 fps
++ grep 'inference latency:' ./logs/efficientnet_b1-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=3.232
++ grep 'inference Throughput:' ./logs/efficientnet_b1-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=309.441
+ echo efficientnet_b1 NHWC float32 309.441
+ tee -a ./logs/summary.log
efficientnet_b1 NHWC float32 309.441
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a efficientnet_b2 -b 56 --precision float32 --channels_last 1
+ tee ./logs/efficientnet_b2-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/transforms/transforms.py:332: UserWarning: Argument interpolation should be of type InterpolationMode instead of int. Please, use InterpolationMode enum.
  warnings.warn(
Namespace(data='', arch='efficientnet_b2', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'efficientnet_b2'
Using image size 260
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.244 ( 0.244)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.245 ( 0.245)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.247 ( 0.245)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.243 ( 0.245)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.246 ( 0.245)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.245 ( 0.245)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.243 ( 0.245)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.243 ( 0.245)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.244 ( 0.245)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.245 ( 0.245)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 4.371 ms
inference Throughput: 228.793 fps
++ grep 'inference latency:' ./logs/efficientnet_b2-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=4.371
++ grep 'inference Throughput:' ./logs/efficientnet_b2-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=228.793
+ echo efficientnet_b2 NHWC float32 228.793
+ tee -a ./logs/summary.log
efficientnet_b2 NHWC float32 228.793
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a efficientnet_b3 -b 56 --precision float32 --channels_last 1
+ tee ./logs/efficientnet_b3-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Downloading: "https://github.com/rwightman/pytorch-image-models/releases/download/v0.1-weights/efficientnet_b3_ra2-cf984f9c.pth" to /root/.cache/torch/hub/checkpoints/efficientnet_b3_ra2-cf984f9c.pth
/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/transforms/transforms.py:332: UserWarning: Argument interpolation should be of type InterpolationMode instead of int. Please, use InterpolationMode enum.
  warnings.warn(
Namespace(data='', arch='efficientnet_b3', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'efficientnet_b3'
Using image size 300
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.462 ( 0.462)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.462 ( 0.461)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.460 ( 0.461)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.460 ( 0.461)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.461 ( 0.461)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.460 ( 0.460)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.461 ( 0.460)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.461 ( 0.460)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.462 ( 0.461)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.460 ( 0.460)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 8.222 ms
inference Throughput: 121.622 fps
++ grep 'inference latency:' ./logs/efficientnet_b3-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=8.222
++ grep 'inference Throughput:' ./logs/efficientnet_b3-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=121.622
+ echo efficientnet_b3 NHWC float32 121.622
+ tee -a ./logs/summary.log
efficientnet_b3 NHWC float32 121.622
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a fbnetc_100 -b 56 --precision float32 --channels_last 1
+ tee ./logs/fbnetc_100-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Namespace(data='', arch='fbnetc_100', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'fbnetc_100'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.079 ( 0.079)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.078 ( 0.078)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.078 ( 0.078)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.078 ( 0.078)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.078 ( 0.079)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.078 ( 0.079)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.079 ( 0.079)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.079 ( 0.079)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.078 ( 0.079)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.079 ( 0.079)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 1.402 ms
inference Throughput: 713.110 fps
++ grep 'inference latency:' ./logs/fbnetc_100-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=1.402
++ grep 'inference Throughput:' ./logs/fbnetc_100-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=713.110
+ echo fbnetc_100 NHWC float32 713.110
+ tee -a ./logs/summary.log
fbnetc_100 NHWC float32 713.110
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a googlenet -b 56 --precision float32 --channels_last 1
+ tee ./logs/googlenet-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Namespace(data='', arch='googlenet', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'googlenet'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.109 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.108 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.108 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.109 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.109 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.108 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.109 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.108 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.110 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.109 ( 0.109)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 1.942 ms
inference Throughput: 514.979 fps
++ grep 'inference latency:' ./logs/googlenet-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=1.942
++ grep 'inference Throughput:' ./logs/googlenet-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=514.979
+ echo googlenet NHWC float32 514.979
+ tee -a ./logs/summary.log
googlenet NHWC float32 514.979
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a inception_v3 -b 56 --precision float32 --channels_last 1
+ tee ./logs/inception_v3-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Namespace(data='', arch='inception_v3', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'inception_v3'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.153 ( 0.153)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.150 ( 0.152)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.153 ( 0.152)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.152 ( 0.152)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.152 ( 0.152)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.151 ( 0.152)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.153 ( 0.152)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.152 ( 0.152)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.151 ( 0.152)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.152 ( 0.152)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 2.707 ms
inference Throughput: 369.442 fps
++ grep 'inference latency:' ./logs/inception_v3-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=2.707
++ grep 'inference Throughput:' ./logs/inception_v3-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=369.442
+ echo inception_v3 NHWC float32 369.442
+ tee -a ./logs/summary.log
inception_v3 NHWC float32 369.442
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a mnasnet0_5 -b 56 --precision float32 --channels_last 1
+ tee ./logs/mnasnet0_5-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Namespace(data='', arch='mnasnet0_5', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'mnasnet0_5'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.033 ( 0.033)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.033 ( 0.033)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.033 ( 0.033)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.033 ( 0.033)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.033 ( 0.033)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.033 ( 0.033)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.033 ( 0.033)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.033 ( 0.033)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.033 ( 0.033)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.033 ( 0.033)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 0.590 ms
inference Throughput: 1695.508 fps
++ grep 'inference latency:' ./logs/mnasnet0_5-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=0.590
++ grep 'inference Throughput:' ./logs/mnasnet0_5-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=1695.508
+ echo mnasnet0_5 NHWC float32 1695.508
+ tee -a ./logs/summary.log
mnasnet0_5 NHWC float32 1695.508
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a mnasnet1_0 -b 56 --precision float32 --channels_last 1
+ tee ./logs/mnasnet1_0-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Namespace(data='', arch='mnasnet1_0', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'mnasnet1_0'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.065 ( 0.065)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.065 ( 0.065)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.065 ( 0.065)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.066 ( 0.065)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.065 ( 0.065)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.065 ( 0.065)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.065 ( 0.065)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.066 ( 0.065)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.065 ( 0.065)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.065 ( 0.065)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 1.165 ms
inference Throughput: 858.526 fps
++ grep 'inference latency:' ./logs/mnasnet1_0-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=1.165
++ grep 'inference Throughput:' ./logs/mnasnet1_0-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=858.526
+ echo mnasnet1_0 NHWC float32 858.526
+ tee -a ./logs/summary.log
mnasnet1_0 NHWC float32 858.526
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a resnet101 -b 56 --precision float32 --channels_last 1
+ tee ./logs/resnet101-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
Namespace(data='', arch='resnet101', workers=1, epochs=90, start_epoch=0, batch_size=56, lr=0.1, momentum=0.9, weight_decay=0.0001, print_freq=10, resume='', evaluate=True, pretrained=True, world_size=-1, rank=-1, ppn=1, dist_url='tcp://224.66.41.62:23456', dist_backend='nccl', seed=None, gpu=None, image_size=224, advprop=False, multiprocessing_distributed=False, ipex=False, jit=False, jit_optimize=False, llga=False, precision='float32', no_cuda=True, iterations=100, warmup_iterations=10, profile=False, performance=True, dummy=True, num_classes=1000, channels_last=1, to_mkldnn=0, config_file='./conf.yaml', int8_mkldnn=False, torchdynamo_ipex=False, fx=False)
=> using pre-trained model 'resnet101'
Using image size 224
Test: [0/0]	Time  0.000 ( 0.000)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [10/0]	Time  0.445 ( 0.445)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [20/0]	Time  0.445 ( 0.445)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [30/0]	Time  0.445 ( 0.445)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [40/0]	Time  0.445 ( 0.445)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [50/0]	Time  0.444 ( 0.444)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [60/0]	Time  0.444 ( 0.444)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [70/0]	Time  0.445 ( 0.444)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [80/0]	Time  0.446 ( 0.444)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [90/0]	Time  0.444 ( 0.444)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
Test: [100/0]	Time  0.446 ( 0.444)	Loss 0.0000e+00 (0.0000e+00)	Acc@1   0.00 (  0.00)	Acc@5   0.00 (  0.00)
inference latency: 7.933 ms
inference Throughput: 126.059 fps
++ grep 'inference latency:' ./logs/resnet101-float32.log
++ sed -e 's/.*latency//;s/[^0-9.]//g'
+ latency=7.933
++ grep 'inference Throughput:' ./logs/resnet101-float32.log
++ sed -e 's/.*Throughput//;s/[^0-9.]//g'
+ throughput=126.059
+ echo resnet101 NHWC float32 126.059
+ tee -a ./logs/summary.log
resnet101 NHWC float32 126.059
+ for model in ${MODEL_NAME_LIST[@]}
+ numactl --cpunodebind=0 --membind=0 python main.py -e --performance --pretrained --dummy --no-cuda -j 1 -w 10 -i 100 -a resnet152 -b 56 --precision float32 --channels_last 1
+ tee ./logs/resnet152-float32.log

User settings:

   KMP_AFFINITY=granularity=fine,compact,1,0
   KMP_BLOCKTIME=1
   KMP_SETTINGS=1

Effective settings:

   KMP_ABORT_DELAY=0
   KMP_ADAPTIVE_LOCK_PROPS='1,1024'
   KMP_ALIGN_ALLOC=64
   KMP_ALL_THREADPRIVATE=448
   KMP_ATOMIC_MODE=2
   KMP_BLOCKTIME=1
   KMP_CPUINFO_FILE: value is not defined
   KMP_DETERMINISTIC_REDUCTION=false
   KMP_DEVICE_THREAD_LIMIT=2147483647
   KMP_DISP_HAND_THREAD=false
   KMP_DISP_NUM_BUFFERS=7
   KMP_DUPLICATE_LIB_OK=false
   KMP_ENABLE_TASK_THROTTLING=true
   KMP_FORCE_MONOTONIC_DYNAMIC_SCHEDULE=false
   KMP_FORCE_REDUCTION: value is not defined
   KMP_FOREIGN_THREADS_THREADPRIVATE=true
   KMP_FORKJOIN_BARRIER='2,2'
   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'
   KMP_FORKJOIN_FRAMES=true
   KMP_FORKJOIN_FRAMES_MODE=3
   KMP_GTID_MODE=3
   KMP_HANDLE_SIGNALS=false
   KMP_HOT_TEAMS_MAX_LEVEL=1
   KMP_HOT_TEAMS_MODE=0
   KMP_INIT_AT_FORK=true
   KMP_ITT_PREPARE_DELAY=0
   KMP_LIBRARY=throughput
   KMP_LOCK_KIND=tas
   KMP_MALLOC_POOL_INCR=1M
   KMP_MWAIT_HINTS=0
   KMP_NESTING_MODE=0
   KMP_NUM_LOCKS_IN_BLOCK=1
   KMP_PLAIN_BARRIER='2,2'
   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'
   KMP_REDUCTION_BARRIER='1,1'
   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'
   KMP_SCHEDULE='static,balanced;guided,iterative'
   KMP_SETTINGS=true
   KMP_SPIN_BACKOFF_PARAMS='4096,100'
   KMP_STACKOFFSET=64
   KMP_STACKPAD=0
   KMP_STACKSIZE=8M
   KMP_STORAGE_MAP=false
   KMP_TASKING=2
   KMP_TASKLOOP_MIN_TASKS=0
   KMP_TASK_STEALING_CONSTRAINT=1
   KMP_TEAMS_PROC_BIND=spread
   KMP_TEAMS_THREAD_LIMIT=112
   KMP_TOPOLOGY_METHOD=all
   KMP_USER_LEVEL_MWAIT=false
   KMP_USE_YIELD=1
   KMP_VERSION=false
   KMP_WARNINGS=true
   LIBOMP_NUM_HIDDEN_HELPER_THREADS=0
   LIBOMP_USE_HIDDEN_HELPER_TASK=false
   OMP_AFFINITY_FORMAT='OMP: pid %P tid %i thread %n bound to OS proc set {%A}'
   OMP_ALLOCATOR=omp_default_mem_alloc
   OMP_CANCELLATION=false
   OMP_DEBUG=disabled
   OMP_DEFAULT_DEVICE=0
   OMP_DISPLAY_AFFINITY=false
   OMP_DISPLAY_ENV=false
   OMP_DYNAMIC=false
   OMP_MAX_ACTIVE_LEVELS=1
   OMP_MAX_TASK_PRIORITY=0
   OMP_NESTED: deprecated; max-active-levels-var=1
   OMP_NUM_TEAMS=0
   OMP_NUM_THREADS: value is not defined
   OMP_PLACES='threads'
   OMP_PROC_BIND='intel'
   OMP_SCHEDULE='static'
   OMP_STACKSIZE=8M
   OMP_TARGET_OFFLOAD=DEFAULT
   OMP_TEAMS_THREAD_LIMIT=0
   OMP_THREAD_LIMIT=2147483647
   OMP_TOOL=enabled
   OMP_TOOL_LIBRARIES: value is not defined
   OMP_TOOL_VERBOSE_INIT: value is not defined
   OMP_WAIT_POLICY=PASSIVE
   KMP_AFFINITY='noverbose,warnings,respect,granularity=thread,compact,1,0'

/root/miniconda3/envs/ipex111/lib/python3.9/site-packages/torchvision/io/image.py:13: UserWarning: Failed to load image Python extension: libc10_cuda.so: cannot open shared object file: No such file or directory
  warn(f"Failed to load image Python extension: {e}")
